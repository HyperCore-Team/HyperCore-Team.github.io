<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>EVM Contract - Network of Momentum Multi-chain Infrastructure</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../../favicon.svg">
        <link rel="shortcut icon" href="../../../../favicon.png">
        <link rel="stylesheet" href="../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../css/general.css">
        <link rel="stylesheet" href="../../../../css/chrome.css">
        <link rel="stylesheet" href="../../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../highlight.css">
        <link rel="stylesheet" href="../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../../../intro/introduction.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../intro/architecture.html"><strong aria-hidden="true">1.1.</strong> Architecture Overview</a></li><li class="chapter-item expanded "><a href="../../../../intro/participants.html"><strong aria-hidden="true">1.2.</strong> Participants</a></li><li class="chapter-item expanded "><a href="../../../../intro/orbital.html"><strong aria-hidden="true">1.3.</strong> Orbital Program</a></li><li class="chapter-item expanded "><a href="../../../../intro/assets.html"><strong aria-hidden="true">1.4.</strong> Assets</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/intro.html"><strong aria-hidden="true">2.</strong> Decentralized Bridge</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/core_contracts.html"><strong aria-hidden="true">2.1.</strong> Core Contracts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/smart_contracts/intro.html"><strong aria-hidden="true">2.1.1.</strong> EVM Smart Contracts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/smart_contracts/evm/contract.html" class="active"><strong aria-hidden="true">2.1.1.1.</strong> EVM Contract</a></li><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/smart_contracts/evm/tests.html"><strong aria-hidden="true">2.1.1.2.</strong> Unit Tests</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/embedded_bridge/contract.html"><strong aria-hidden="true">2.1.2.</strong> Embedded Bridge Contract</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/embedded_bridge/constants.html"><strong aria-hidden="true">2.1.2.1.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/embedded_bridge/errors.html"><strong aria-hidden="true">2.1.2.2.</strong> Error states</a></li><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/embedded_bridge/api.html"><strong aria-hidden="true">2.1.2.3.</strong> API</a></li><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/core_contracts/embedded_bridge/tests.html"><strong aria-hidden="true">2.1.2.4.</strong> Unit Tests</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/orchestrator_layer/intro.html"><strong aria-hidden="true">2.2.</strong> Orchestrator Layer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../decentralized_bridge/orchestrator_layer/connectors.html"><strong aria-hidden="true">2.2.1.</strong> Connectors</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../liquidity/intro.html"><strong aria-hidden="true">3.</strong> Protocol Level Liquidity</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../liquidity/embedded_liquidity/contract.html"><strong aria-hidden="true">3.1.</strong> Liquidity Embedded Contract</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../liquidity/embedded_liquidity/api.html"><strong aria-hidden="true">3.1.1.</strong> API</a></li><li class="chapter-item expanded "><a href="../../../../liquidity/embedded_liquidity/constants.html"><strong aria-hidden="true">3.1.2.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../../../../liquidity/embedded_liquidity/errors.html"><strong aria-hidden="true">3.1.3.</strong> Errors</a></li><li class="chapter-item expanded "><a href="../../../../liquidity/embedded_liquidity/tests.html"><strong aria-hidden="true">3.1.4.</strong> Unit Tests</a></li></ol></li></ol></li><li class="chapter-item expanded "><li class="part-title">Resources</li><li class="chapter-item expanded "><a href="../../../../license.html"><strong aria-hidden="true">4.</strong> License</a></li><li class="chapter-item expanded "><a href="../../../../security.html"><strong aria-hidden="true">5.</strong> Security</a></li><li class="chapter-item expanded "><a href="../../../../deployed_contracts.html"><strong aria-hidden="true">6.</strong> Deployed Contracts</a></li><li class="chapter-item expanded "><a href="../../../../audits.html"><strong aria-hidden="true">7.</strong> Audits</a></li><li class="chapter-item expanded "><a href="../../../../references.html"><strong aria-hidden="true">8.</strong> References</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Network of Momentum Multi-chain Infrastructure</h1>

                    <div class="right-buttons">
                        <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="evm-smart-contracts"><a class="header" href="#evm-smart-contracts">EVM Smart Contracts</a></h1>
<p>The EVM smart contracts are deployed on the EVM networks integrated into the NoM Multi-chain Infrastructure.</p>
<h2 id="contract-anatomy"><a class="header" href="#contract-anatomy">Contract Anatomy</a></h2>
<p>The code is written in <code>Solidity v0.8.19</code> (latest as March 2023). </p>
<h3 id="imports"><a class="header" href="#imports">Imports</a></h3>
<p>The smart contract uses the following <code>openzeppelin</code> standard contracts:</p>
<pre><code class="language-js">import &quot;@openzeppelin/contracts/utils/Context.sol&quot;;
import &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;
import &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;
import &quot;@openzeppelin/contracts/utils/cryptography/ECDSA.sol&quot;;
</code></pre>
<ul>
<li>
<p><code>using ECDSA for bytes32</code> - used to add the <code>recover</code> ECDSA signature functionality</p>
</li>
<li>
<p><code>using SafeERC20 for IERC20</code> - used to add the <code>safeTransfer</code> and <code>safeTransferFrom</code> functionalities</p>
</li>
<li>
<p><code>contract Bridge is Context</code> - inherit <code>_msgSender()</code> method to get the sender</p>
</li>
</ul>
<h3 id="modifiers"><a class="header" href="#modifiers">Modifiers</a></h3>
<ul>
<li>
<p><code>onlyAdministrator</code> can only be called by owner of the <code>administrator</code> private key</p>
</li>
<li>
<p><code>isNotHalted</code> can only be called if the bridge is not halted</p>
</li>
</ul>
<h3 id="structs"><a class="header" href="#structs">Structs</a></h3>
<ul>
<li>
<p><code>TokenInfo</code> is used to store information about the bridged tokens</p>
</li>
<li>
<p><code>RedeemInfo</code> is used for redeeming funds and information regarding time challenges</p>
</li>
</ul>
<h3 id="events"><a class="header" href="#events">Events</a></h3>
<pre><code class="language-js">event RegisteredRedeem(uint256 indexed nonce, address indexed to, address indexed token, uint256 amount);
event Redeemed(uint256 indexed nonce, address indexed to, address indexed token, uint256 amount);
event Unwrapped(address indexed from, address indexed token, string to, uint256 amount);
event Halted();
event Unhalted();
event RevokedRedeem(uint256 indexed nonce);
event PendingAdministrator(address indexed newAdministrator);
event SetAdministrator(address indexed newAdministrator, address oldAdministrator);
event PendingTss(address indexed newTss);
event SetTss(address indexed newTss, address oldTss);
event PendingGuardians();
event SetGuardians();
</code></pre>
<ul>
<li>
<p><code>RegisteredRedeem</code> emitted when a redeem request is registered</p>
</li>
<li>
<p><code>Redeemed</code> emitted when a redeem is completed</p>
</li>
<li>
<p><code>Unwrapped</code> emitted when an unwrap request is registered</p>
</li>
<li>
<p><code>Halted</code> emitted when the bridge is halted</p>
</li>
<li>
<p><code>Unhalted</code> emitted when the bridge is unhalted</p>
</li>
<li>
<p><code>RevokedRedeem</code> emitted when the administrator revokes an invalid redeem</p>
</li>
<li>
<p><code>PendingAdministrator</code> emitted when a request for changing the administrator address is made</p>
</li>
<li>
<p><code>SetAdministrator</code> emitted when the administrator address is set</p>
</li>
<li>
<p><code>PendingTss</code> emitted when a request for changing the tss address is made</p>
</li>
<li>
<p><code>SetTss</code> emitted when the tss address is set</p>
</li>
<li>
<p><code>PendingGuardians</code> emitted when a request for changing the guardian addresses is made</p>
</li>
<li>
<p><code>SetGuardians</code> emitted when the addresses of the guardians are set</p>
</li>
</ul>
<h3 id="constants"><a class="header" href="#constants">Constants</a></h3>
<ul>
<li>
<p><code>uint256 constant uint256max</code> stores <code>type(uint256).max</code></p>
</li>
<li>
<p><code>uint32 private constant networkClass</code> for EVM networks is hard coded to <code>2</code></p>
</li>
<li>
<p><code>uint8 private constant  minNominatedGuardians</code> must coincide with the <code>MinGuardians</code> constant from the embedded contract and is hard coded to <code>5</code></p>
</li>
</ul>
<h3 id="variables"><a class="header" href="#variables">Variables</a></h3>
<ul>
<li>
<p><code>estimatedBlockTime</code> is set for each network depending on the block time interval; it is used by the <code>orchestrator</code> to know how much to wait for one confirmation</p>
</li>
<li>
<p><code>confirmationsToFinality</code> is the number of confirmations required to achieve finality for a given network; it is used by the <code>orchestrator</code> to confirm an event</p>
</li>
<li>
<p><code>halted</code> indicates if the bridge is halted or not</p>
</li>
<li>
<p><code>allowKeyGen</code> indicates wether or not the tss address can be changed with a valid signature; the <code>admin</code> can always change the tss address</p>
</li>
<li>
<p><code>administrator</code> is the EVM compatible address of the <code>admin</code></p>
</li>
<li>
<p><code>administratorDelay</code> is the delay required for changing the <code>admin</code>; it cannot be lower than <code>minAdministratorDelay</code></p>
</li>
<li>
<p><code>minAdministratorDelay</code> is the minimum delay required for changing the <code>admin</code></p>
</li>
<li>
<p><code>tss</code> is the TSS address jointly created during the key generation ceremony</p>
</li>
<li>
<p><code>softDelay</code> is the delay required for the time challenge security primitive; it cannot be lower than <code>minSoftDelay</code></p>
</li>
<li>
<p><code>minSoftDelay</code> is the minimum delay required for the time challenge security primitive</p>
</li>
<li>
<p><code>guardians</code> is the array containing the addresses of the guardians</p>
</li>
<li>
<p><code>nominatedGuardians</code> is the array containing the addresses of the nominated guardians</p>
</li>
<li>
<p><code>guardiansVotes</code> is the array containing the votes for the guardians</p>
</li>
<li>
<p><code>votesCount</code> is a mapping containing the proposed <code>admin</code> votes of each guardian</p>
</li>
<li>
<p><code>unhaltedAt</code> is the last block height at which the bridge was unhalted</p>
</li>
<li>
<p><code>unhaltDuration</code> is the duration in blocks during which the bridge is still halted after the <code>unhaltedAt</code> block height; it cannot be lower than <code>minUnhaltDuration</code></p>
</li>
<li>
<p><code>minUnhaltDuration</code> is the minimum duration in blocks during which the bridge is still halted after the <code>unhaltedAt</code> block height</p>
</li>
<li>
<p><code>actionsNonce</code> is the nonce required for a valid signature at a particular state of the bridge; must be always incremented after a signature is validated</p>
</li>
<li>
<p><code>contractDeploymentHeight</code> is the block height at which the contract was deployed; it is used by the <code>orchestrator</code> to know the height to scan events</p>
</li>
</ul>
<h3 id="contract-implementation"><a class="header" href="#contract-implementation">Contract implementation</a></h3>
<h4 id="constructor"><a class="header" href="#constructor"><code>Constructor</code></a></h4>
<p>In the constructor we set the following variables:</p>
<ul>
<li><code>administrator</code></li>
<li><code>minUnhaltDuration</code></li>
<li><code>unhaltDuration</code></li>
<li><code>minAdministratorDelay</code></li>
<li><code>administratorDelay</code></li>
<li><code>minSoftDelay</code></li>
<li><code>softDelay</code></li>
<li><code>guardians</code></li>
<li><code>guardiansVotes</code></li>
<li><code>estimatedBlockTime</code></li>
<li><code>confirmationsToFinality</code></li>
<li><code>contractDeploymentHeight</code></li>
</ul>
<h3 id="redeem-method"><a class="header" href="#redeem-method">redeem method</a></h3>
<p>The first and the second step of the redeem process. During the first step a time challenge will start. During the second step, after <code>softDelay</code>, the funds will be released/minted. The bridge must not be halted, the request must not have been revoked before, the token should be <code>redeemable</code> and the TSS signature valid.</p>
<h4 id="parameters"><a class="header" href="#parameters">Parameters</a></h4>
<ul>
<li><code>to</code> - EVM address that will receive the funds</li>
<li><code>token</code> - <code>EVM-20</code> token address</li>
<li><code>amount</code> - amount of token</li>
<li><code>nonce</code> - unique identifier of the redeem request</li>
<li><code>signature</code>  - signature generated by the current TSS</li>
</ul>
<h4 id="returns"><a class="header" href="#returns">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="unwrap-method"><a class="header" href="#unwrap-method">unwrap method</a></h3>
<p>Register an unwrap request. Tokens will be locked/burned. The bridge must not be halted and the token must be <code>bridgeable</code>.</p>
<h4 id="parameters-1"><a class="header" href="#parameters-1">Parameters</a></h4>
<ul>
<li><code>token</code> - <code>EVM-20</code> token address</li>
<li><code>amount</code> - amount of token</li>
<li><code>to</code> - NoM address</li>
</ul>
<h4 id="returns-1"><a class="header" href="#returns-1">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="settokeninfo-method"><a class="header" href="#settokeninfo-method">setTokenInfo method</a></h3>
<p>Adds or edits an existing <code>tokenInfo</code>. It contains information about permitted tokens to swap or redeem and their delays. Can be called only by the <code>administrator</code>. Guarded by a time challenge.</p>
<h4 id="parameters-2"><a class="header" href="#parameters-2">Parameters</a></h4>
<ul>
<li><code>token</code> - <code>EVM-20</code> token address</li>
<li><code>minAmount</code> - minimum amount of the token for unwrapping</li>
<li><code>redeemDelay</code> - delay in blocks after the first redeem step in order to receive the funds</li>
<li><code>bridgeable</code> - whether the token can be unwrapped</li>
<li><code>redeemable</code> - whether the token can be redeemed</li>
<li><code>isOwned</code> - whether this contract has owner rights for the <code>EVM-20</code></li>
</ul>
<h4 id="returns-2"><a class="header" href="#returns-2">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="halt-method"><a class="header" href="#halt-method">halt method</a></h3>
<p>Halts the network. It does not require a signature if called by the <code>administrator</code>. Otherwise, a TSS signature is needed.</p>
<h4 id="parameters-3"><a class="header" href="#parameters-3">Parameters</a></h4>
<ul>
<li><code>signature</code> - current TSS signature</li>
</ul>
<h4 id="returns-3"><a class="header" href="#returns-3">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="unhalt-method"><a class="header" href="#unhalt-method">unhalt method</a></h3>
<p>Sets halted to <code>false</code> and updates the <code>haltedAt</code> block such that <code>unhaltDelay</code> starts. Can only be called by the <code>administrator</code>.</p>
<h4 id="parameters-4"><a class="header" href="#parameters-4">Parameters</a></h4>
<ul>
<li>None</li>
</ul>
<h4 id="returns-4"><a class="header" href="#returns-4">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="revokeredeems-method"><a class="header" href="#revokeredeems-method">revokeRedeems method</a></h3>
<p>Revokes invalid redeem requests.</p>
<h4 id="parameters-5"><a class="header" href="#parameters-5">Parameters</a></h4>
<ul>
<li><code>nonces</code> - an array containing the unique identifiers for each request</li>
</ul>
<h4 id="returns-5"><a class="header" href="#returns-5">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="setadministrator-method"><a class="header" href="#setadministrator-method">setAdministrator method</a></h3>
<p>Changes the <code>administrator</code> address. Can only be called by the <code>administrator</code>. Guarded by a time challenge.</p>
<h4 id="parameters-6"><a class="header" href="#parameters-6">Parameters</a></h4>
<ul>
<li><code>newAdministrator</code> - <code>new</code> administrator address</li>
</ul>
<h4 id="returns-6"><a class="header" href="#returns-6">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="settss-method"><a class="header" href="#settss-method">setTss method</a></h3>
<p>Changes the TSS address. If called by the <code>administrator</code>, no signature is required and the time challenge starts. Otherwise, a valid TSS signature is required in order to validate the new address.</p>
<h4 id="parameters-7"><a class="header" href="#parameters-7">Parameters</a></h4>
<ul>
<li><code>newTss</code> - <code>new</code> TSS address</li>
<li><code>oldSignature</code> - signature from the current TSS</li>
<li><code>newSignature</code> - signature from the new TSS</li>
</ul>
<h4 id="returns-7"><a class="header" href="#returns-7">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="emergency-method"><a class="header" href="#emergency-method">emergency method</a></h3>
<p>Sets administrator to <code>address(0)</code>, TSS to <code>address(0)</code> and halts the bridge. Can only be called by the <code>administrator</code>. It enables <code>guardians</code> to propose.</p>
<h4 id="parameters-8"><a class="header" href="#parameters-8">Parameters</a></h4>
<ul>
<li>None</li>
</ul>
<h4 id="returns-8"><a class="header" href="#returns-8">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="nominateguardians"><a class="header" href="#nominateguardians">nominateGuardians</a></h3>
<p>Nominate the <code>guardians</code> that are responsible to propose a new administrator in case of an emergency. Guarded by a time challenge. Can only be called by the <code>administrator</code>.</p>
<h4 id="parameters-9"><a class="header" href="#parameters-9">Parameters</a></h4>
<ul>
<li><code>newGuardians</code> - an array containing the new <code>guardian</code> addresses</li>
</ul>
<h4 id="returns-9"><a class="header" href="#returns-9">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="proposeadministrator-method"><a class="header" href="#proposeadministrator-method">proposeAdministrator method</a></h3>
<p>Will vote for a new <code>administrator</code> address. Can only be called by a <code>guardian</code> only if the bridge is in emergency state (the address of the <code>administrator</code> is <code>address(0)</code>).</p>
<h4 id="parameters-10"><a class="header" href="#parameters-10">Parameters</a></h4>
<ul>
<li><code>newAdministrator</code> - new <code>administrator</code> address</li>
</ul>
<h4 id="returns-10"><a class="header" href="#returns-10">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="setsoftdelay-method"><a class="header" href="#setsoftdelay-method">setSoftDelay method</a></h3>
<p>Sets the delay for the time challenge. Can only be called by the <code>administrator</code>.</p>
<h4 id="parameters-11"><a class="header" href="#parameters-11">Parameters</a></h4>
<ul>
<li><code>delay</code> - delay in blocks</li>
</ul>
<h4 id="returns-11"><a class="header" href="#returns-11">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="setunhaltduration-method"><a class="header" href="#setunhaltduration-method">setUnhaltDuration method</a></h3>
<p>Sets the delay during which the bridge remains halted after calling <code>unhalt</code>. Can only be called by the <code>administrator</code>.</p>
<h4 id="parameters-12"><a class="header" href="#parameters-12">Parameters</a></h4>
<ul>
<li><code>duration</code> - duration in blocks</li>
</ul>
<h4 id="returns-12"><a class="header" href="#returns-12">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="setestimatedblocktime-method"><a class="header" href="#setestimatedblocktime-method">setEstimatedBlockTime method</a></h3>
<p>Sets the delay in which the bridge remains halted after calling <code>unhalt</code>. Can only be called by the <code>administrator</code>.</p>
<h4 id="parameters-13"><a class="header" href="#parameters-13">Parameters</a></h4>
<ul>
<li><code>blockTime</code> - block time in seconds; it is used by the <code>orchestrator</code> layer</li>
</ul>
<h4 id="returns-13"><a class="header" href="#returns-13">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="setallowkeygen-method"><a class="header" href="#setallowkeygen-method">setAllowKeyGen method</a></h3>
<p>Sets <code>allowKeyGen</code> to true that permits the TSS address to be changed by an address different from the <code>administrator</code>. Can only be called by the <code>administrator</code>.</p>
<h4 id="parameters-14"><a class="header" href="#parameters-14">Parameters</a></h4>
<ul>
<li><code>value</code> - <code>true</code> or <code>false</code></li>
</ul>
<h4 id="returns-14"><a class="header" href="#returns-14">Returns</a></h4>
<ul>
<li>None</li>
</ul>
<h3 id="setconfirmationstofinality-method"><a class="header" href="#setconfirmationstofinality-method">setConfirmationsToFinality method</a></h3>
<p>Sets the confirmations required by an event to be confirmed. Used by the <code>orchestrator</code> layer. Can only be called by the <code>administrator</code>.</p>
<h4 id="parameters-15"><a class="header" href="#parameters-15">Parameters</a></h4>
<ul>
<li><code>confirmations</code> - number of confirmations in blocks</li>
</ul>
<h4 id="returns-15"><a class="header" href="#returns-15">Returns</a></h4>
<ul>
<li>None</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../../decentralized_bridge/core_contracts/smart_contracts/intro.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../../decentralized_bridge/core_contracts/smart_contracts/evm/tests.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../../decentralized_bridge/core_contracts/smart_contracts/intro.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../../decentralized_bridge/core_contracts/smart_contracts/evm/tests.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../../elasticlunr.min.js"></script>
        <script src="../../../../mark.min.js"></script>
        <script src="../../../../searcher.js"></script>

        <script src="../../../../clipboard.min.js"></script>
        <script src="../../../../highlight.js"></script>
        <script src="../../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
